"use strict";var Station=require("../models/stationOwner.model"),_require=require("express"),request=_require.request,registerStation=function(t,r){var n,a,s,u,i,o,c,d,p;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body.stationid,a=t.body.ownername,s=t.body.stationname,u=t.body.phonenumber,i=t.body.address,o=t.body.arrivaltime,c=t.body.finishtime,d=t.body.fueltype,p=new Station({stationid:n,ownername:a,stationname:s,phonenumber:u,address:i,arrivaltime:o,finishtime:c,fueltype:d}),e.prev=9,e.next=12,regeneratorRuntime.awrap(p.save());case 12:if(e.sent)return e.abrupt("return",r.status(201).send({message:"New Station Registered to the Fuel System"}));e.next=17;break;case 17:return e.abrupt("return",r.status(500).send({message:"Internal server error"}));case 18:e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(9),console.log(e.t0),e.abrupt("return",r.status(400).send({message:"Error while registering the station to the application"}));case 24:case"end":return e.stop()}},null,null,[[9,20]])},getAllStation=function(e,t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Station.find());case 3:if(r=e.sent)return e.abrupt("return",t.json(r));e.next=8;break;case 8:return e.abrupt("return",t.status(404).send({message:"Error on retrieving station"}));case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",t.status(500).send({message:"Internal server error"}));case 14:case"end":return e.stop()}},null,null,[[0,11]])},getOneStation=function(t,r){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.id,e.prev=1,e.next=4,regeneratorRuntime.awrap(Station.findOne({stationID:n}));case 4:if(a=e.sent)return e.abrupt("return",r.json(a));e.next=9;break;case 9:return e.abrupt("return",r.status(404).send({message:"No such station found"}));case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",r.status(500).send({message:"Internal Server Error"}));case 15:case"end":return e.stop()}},null,null,[[1,12]])},searchStation=function(t,r){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.stationname.trim(),e.prev=1,e.next=4,regeneratorRuntime.awrap(Station.find());case 4:if(!e.sent){e.next=9;break}Station.find({stationname:{$regex:"^"+n+".*",$options:"i"}}).then(function(e){r.json(e)}),e.next=10;break;case 9:return e.abrupt("return",r.status(404).send({message:"No such station found"}));case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",r.status(500).send({message:"Internal Server Error"}));case 15:case"end":return e.stop()}},null,null,[[1,12]])},updateTime=function(t,r){var n,a,s,u,i,o,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.stationid,e.next=3,regeneratorRuntime.awrap(Station.findOne({stationid:n}));case 3:return a=e.sent,s=a.ownername,u=a.stationname,i=a.address,o=a.phonenumber,c={stationid:n,ownername:s,stationname:u,phonenumber:o,address:i,arrivaltime:t.body.arrivaltime,finishtime:t.body.finishtime,fueltype:t.body.fueltype},e.prev=9,e.next=12,regeneratorRuntime.awrap(Station.findOneAndUpdate({stationid:n},c));case 12:if(e.sent)return e.abrupt("return",r.status(200).send({message:"Successfully updated"}));e.next=17;break;case 17:return e.abrupt("return",r.status(500).send({message:"Internal server error"}));case 18:e.next=23;break;case 20:return e.prev=20,e.t0=e.catch(9),e.abrupt("return",r.status(400).send({message:"Unable to update"}));case 23:case"end":return e.stop()}},null,null,[[9,20]])};module.exports={registerStation:registerStation,getAllStation:getAllStation,getOneStation:getOneStation,searchStation:searchStation,updateTime:updateTime};
//# sourceMappingURL=stationOwner.controller.min.js.map
