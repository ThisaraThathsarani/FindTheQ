{"version":3,"sources":["stationOwner.controller.js"],"names":["Station","require","request","registerStation","req","res","stationid","ownername","stationname","phonenumber","address","arrivaltime","finishtime","fueltype","station","regeneratorRuntime","async","_context","prev","next","body","awrap","save","sent","abrupt","status","send","message","t0","console","log","stop","getAllStation","stations","_context2","find","json","getOneStation","stationID","_context3","params","id","findOne","value","_context4","trim","$regex","$options","then","searchStationByAddress","_context5","updateTime","changeTime","_context6","findOneAndUpdate","module","exports","searchStation"],"mappings":"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","file":"stationOwner.controller.min.js","sourcesContent":["const Station = require('../models/stationOwner.model');\r\nconst { request } = require('express')\r\n\r\nconst registerStation = async (req, res) => {\r\n\r\n    const stationid = req.body.stationid;\r\n    const ownername = req.body.ownername;\r\n    const stationname = req.body.stationname;\r\n    const phonenumber = req.body.phonenumber;\r\n    const address = req.body.address;\r\n    const arrivaltime = req.body.arrivaltime;\r\n    const finishtime = req.body.finishtime;\r\n    const fueltype = req.body.fueltype;\r\n\r\n\r\n    const station = new Station({\r\n        stationid,\r\n        ownername,\r\n        stationname,\r\n        phonenumber,\r\n        address,\r\n        arrivaltime,\r\n        finishtime,\r\n        fueltype\r\n    })\r\n\r\n    try{\r\n        let response = await station.save();\r\n        if(response) {\r\n            return res.status(201).send({message: \"New Station Registered to the Fuel System\"})\r\n        }else {\r\n            return res.status(500).send({message: \"Internal server error\"});\r\n        }\r\n    }catch (error) {\r\n        console.log(error);\r\n        return res.status(400).send({message: \"Error while registering the station to the application\"})\r\n\r\n    }\r\n\r\n}\r\n\r\nconst getAllStation = async (req, res) => {\r\n    try {\r\n        let stations = await Station.find();\r\n        if(stations) {\r\n            return res.json(stations)\r\n        }else {\r\n            return res.status(404).send({message: 'Error on retrieving station'})\r\n        }\r\n    }catch (err) {\r\n        return res.status(500).send({ message: 'Internal server error' })\r\n    }\r\n}\r\n\r\nconst getOneStation = async (req, res) => {\r\n\r\n    const stationID = req.params.id\r\n\r\n    try {\r\n        let station = await Station.findOne({\r\n           stationID: stationID \r\n        });\r\n        if(station) {\r\n            return res.json(station)\r\n        }else {\r\n            return res.status(404).send({ message: 'No such station found' });\r\n        }\r\n    } catch (err) {\r\n        return res.status(500).send({ message: 'Internal Server Error' })\r\n    }\r\n}\r\n\r\nconst searchStation = async (req, res) => {\r\n    let value = req.params.stationname.trim();\r\n\r\n    try {\r\n        let station = await Station.find();\r\n        if(station) {\r\n            Station.find({ stationname: { $regex: \"^\" + value + \".*\", $options: 'i' } }).then((stations) => {\r\n                res.json(stations)\r\n        \r\n            })\r\n        }else {\r\n            return res.status(404).send({ message: 'No such station found' });\r\n        }\r\n    } catch (err) {\r\n        return res.status(500).send({ message: 'Internal Server Error' })\r\n    }\r\n}\r\n\r\nconst searchStationByAddress = async (req, res) => {\r\n    let value = req.params.address.trim();\r\n\r\n    try {\r\n        let station = await Station.find();\r\n        if(station) {\r\n            Station.find({ address: { $regex: \"^\" + value + \".*\", $options: 'i' } }).then((stations) => {\r\n                res.json(stations)\r\n        \r\n            })\r\n        }else {\r\n            return res.status(404).send({ message: 'No such station found' });\r\n        }\r\n    } catch (err) {\r\n        return res.status(500).send({ message: 'Internal Server Error' })\r\n    }\r\n}\r\n\r\nconst updateTime = async (req, res) => {\r\n    const stationid = req.params.stationid;\r\n\r\n    const station = await Station.findOne({ stationid: stationid });\r\n\r\n    const ownername = station.ownername;\r\n    const stationname = station.stationname;\r\n    const address = station.address;\r\n    const phonenumber = station.phonenumber;\r\n\r\n\r\n    const changeTime = {\r\n    stationid : stationid,\r\n    ownername : ownername,\r\n    stationname : stationname,\r\n    phonenumber : phonenumber,\r\n    address : address,\r\n    arrivaltime : req.body.arrivaltime,\r\n    finishtime : req.body.finishtime,\r\n    fueltype : req.body.fueltype,\r\n    }\r\n\r\n    try {\r\n        const response = await Station.findOneAndUpdate({ stationid: stationid } , changeTime);\r\n        if(response){\r\n            return res.status(200).send({message: 'Successfully updated'})\r\n        }else {\r\n\r\n        return res.status(500).send({ message: 'Internal server error' });\r\n        }\r\n\r\n    } catch (err) {\r\n        return res.status(400).send({ message: 'Unable to update' })\r\n    }\r\n}\r\n\r\n\r\n\r\nmodule.exports = {\r\n    registerStation,\r\n    getAllStation,\r\n    getOneStation,\r\n    searchStation,\r\n    updateTime,\r\n    searchStationByAddress\r\n}"]}