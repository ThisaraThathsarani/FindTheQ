"use strict";var Queue=require("../models/queue.model"),_require=require("express"),request=_require.request,registerQueue=function(r,t){var u,n,s,a,c,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.body.stationname,n=r.body.arrivaltime,s=r.body.leavetime,a=r.body.status,c=r.body.vehicleType,o=new Queue({stationname:u,arrivaltime:n,leavetime:s,status:a,vehicleType:c}),e.prev=6,e.next=9,regeneratorRuntime.awrap(o.save());case 9:if(e.sent)return e.abrupt("return",t.status(201).send({message:"New customer added to the queue"}));e.next=14;break;case 14:return e.abrupt("return",t.status(500).send({message:"Internal server error"}));case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(6),console.log(e.t0),e.abrupt("return",t.status(400).send({message:"Error while entering the queue"}));case 21:case"end":return e.stop()}},null,null,[[6,17]])},deletequeue=function(r,t){var u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.params.queueid,e.prev=1,e.next=4,regeneratorRuntime.awrap(Queue.findOneAndDelete({queueid:u}));case 4:if(e.sent)return e.abrupt("return",t.status(204).send({message:"Successfully deleted A User from queue"}));e.next=9;break;case 9:return e.abrupt("return",t.status(404).send({message:"Such user does not remove the queue"}));case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",t.status(500).send({message:"Internal Server Error"}));case 15:case"end":return e.stop()}},null,null,[[1,12]])},getcount=function(r,t){var u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.params.vehicleType.trim(),e.prev=1,e.next=4,regeneratorRuntime.awrap(Queue.find());case 4:if(!e.sent){e.next=9;break}Queue.count({vehicleType:{$regex:"^"+u+".*",$options:"i"}}).then(function(e){t.json(e)}),e.next=10;break;case 9:return e.abrupt("return",t.status(404).send({message:"No such vehicle type found"}));case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",t.status(500).send({message:"Internal Server Error"}));case 15:case"end":return e.stop()}},null,null,[[1,12]])};module.exports={registerQueue:registerQueue,deletequeue:deletequeue,getcount:getcount};
//# sourceMappingURL=queue.controller.min.js.map
